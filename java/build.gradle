buildscript {
    ext {
        protobufGradleVersion = '0.8.0'
        protobufJavaVersion = '3.1.0'
        protocVersion = '3.0.0'
    }
    repositories {
        mavenCentral()
        mavenLocal()
    }

    dependencies {
        classpath("com.google.protobuf:protobuf-gradle-plugin:${protobufGradleVersion}")
    }
}


apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'maven-publish'
apply plugin: 'com.google.protobuf'

dependencies {
    compile("com.google.protobuf:protobuf-java:${protobufJavaVersion}")
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java
        }
    }
}

repositories {
    mavenCentral()
    mavenLocal()
}

sourceSets {
    main {
        proto {
            srcDir '../protobuf'
        }
    }
}

protobuf {
    protoc {
        artifact = "com.google.protobuf:protoc:${protocVersion}"
    }
    generatedFilesBaseDir = "src"
}